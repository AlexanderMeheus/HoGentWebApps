app.factory("posts",["$http","auth",function(t,e){var o={posts:[]};return o.getAll=function(){return t.get("/posts").success(function(t){angular.copy(t,o.posts)})},o.create=function(n){return t.post("/posts",n,{headers:{Authorization:"Bearer "+e.getToken()}}).success(function(t){o.posts.push(t)})},o.upvote=function(o){return t.put("/posts/"+o._id+"/upvote",null,{headers:{Authorization:"Bearer "+e.getToken()}}).success(function(t){o.upvotes+=1})},o.downvote=function(o){return o.upvotes>0?t.put("/posts/"+o._id+"/downvote",null,{headers:{Authorization:"Bearer "+e.getToken()}}).success(function(t){o.upvotes-=1}):void 0},o.get=function(e){return t.get("/posts/"+e).then(function(t){return t.data})},o.addComment=function(o,n){return t.post("/posts/"+o+"/comments",n,{headers:{Authorization:"Bearer "+e.getToken()}})},o.upvoteComment=function(o,n){return t.put("/posts/"+o._id+"/comments/"+n._id+"/upvote",null,{headers:{Authorization:"Bearer "+e.getToken()}}).success(function(t){n.upvotes+=1})},o.downvoteComment=function(o,n){return n.upvotes>0?t.put("/posts/"+o._id+"/comments/"+n._id+"/downvote",null,{headers:{Authorization:"Bearer "+e.getToken()}}).success(function(t){n.upvotes-=1}):void 0},o}]);