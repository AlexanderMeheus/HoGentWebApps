<div class="page-header">
  <h1>Flapper News</h1>
</div>

<md-list>
  <md-list-item class="md-3-line" ng-repeat="post in posts | orderBy: '-upvotes'">
    <div class="md-list-item-text">
      <div class="col-md-4">
        <a href={{post.link}} target="_blank" ng-show='post.link' target="_blank">
          {{post.title}}</a>
        <span ng-hide="post.link">
          {{post.title}}
        </span>
      </div>
      <div class="col-md-4">
        <a ui-sref="posts({id: post._id})">Comments</a>
      </div>
      <div class="col-md-4">
        <span>upvotes:{{post.upvotes}}</span>
        <span aria-hidden="true" class="glyphicon glyphicon-thumbs-up" ng-click="incrementUpvotes(post)"></span>
        <span aria-hidden="true" class="glyphicon glyphicon-thumbs-down" ng-click="decrementUpvotes(post)"></span>
      </div>
      <p ng-show="post.author">
        posted by
        {{post.author}}
      </p>
    </div>
    <md-divider ng-if="!$last"></md-divider>
  </md-list-item>
</md-list>

<br>

<form ng-show="isLoggedIn()" ng-submit="addPost()" style="margin-top:30px;" name="postForm">
  <h3>Add a new post</h3>
  <md-input-container class="md-block">
        <label>Title</label>
        <input required name="title" ng-model="title">
  </md-input-container>
  <md-input-container class="md-block">
        <label>Link</label>
        <input name="link" ng-model="link">
  </md-input-container>
  <button type="submit">Post</button>
</form>
<div ng-hide="isLoggedIn()">
  <h3>You need to
    <a ui-sref="login">Log In</a>
    or
    <a ui-sref="register">Register</a>
    before you can add a post.</h3>
</div>
